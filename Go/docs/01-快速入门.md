# 快速入门

## 环境搭建

### 安装 Go

#### macOS
```bash
# 使用 Homebrew
brew install go

# 或下载官方安装包
# https://golang.org/dl/
```

#### Linux
```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install golang-go

# 或下载官方二进制包
wget https://go.dev/dl/go1.21.5.linux-amd64.tar.gz
sudo tar -C /usr/local -xzf go1.21.5.linux-amd64.tar.gz
```

#### Windows
下载官方安装包：https://golang.org/dl/

### 验证安装

```bash
go version
# 输出：go version go1.21.5 darwin/amd64
```

### 配置环境变量

```bash
# 查看 Go 环境配置
go env

# 重要环境变量
GOROOT=/usr/local/go      # Go 安装目录
GOPATH=$HOME/go           # Go 工作空间（旧版本）
GOPROXY=https://proxy.golang.org  # 代理设置（国内可用 goproxy.cn）
```

## 第一个 Go 程序

### Hello World

创建文件 `hello.go`：

```go
package main

import "fmt"

func main() {
    fmt.Println("Hello, World!")
}
```

### 运行程序

```bash
# 方式1：直接运行
go run hello.go

# 方式2：编译后运行
go build hello.go
./hello        # Linux/macOS
hello.exe      # Windows
```

### 代码解析

```go
package main  // 包声明，main 包是程序的入口
import "fmt"  // 导入标准库 fmt（格式化输入输出）
func main() { // main 函数是程序执行的入口点
    fmt.Println("Hello, World!")
}
```

### 与其他语言对比

| 语言 | Hello World |
|------|------------|
| **Go** | `fmt.Println("Hello, World!")` |
| **C++** | `std::cout << "Hello, World!" << std::endl;` |
| **Rust** | `println!("Hello, World!");` |
| **Java** | `System.out.println("Hello, World!");` |

**Go 特点**：
- 不需要分号（除非一行多条语句）
- `main` 函数必须在 `main` 包中
- 导入的包必须被使用，否则编译错误

## Go 模块系统（Go Modules）

Go 1.11+ 引入了模块系统，替代了旧的 GOPATH 模式。

### 初始化模块

```bash
# 创建新项目
mkdir myproject
cd myproject
go mod init github.com/username/myproject
```

这会创建 `go.mod` 文件：

```go
module github.com/username/myproject

go 1.21
```

### 添加依赖

```bash
# 添加依赖
go get github.com/gin-gonic/gin

# 查看依赖
go list -m all

# 整理依赖
go mod tidy
```

## 实际应用场景 Demo

### Demo 1: 简单的命令行工具

创建一个简单的命令行计算器：

```go
package main

import (
    "fmt"
    "os"
    "strconv"
)

func main() {
    // 检查命令行参数数量：需要程序名 + 3 个参数（数字1、运算符、数字2）
    if len(os.Args) != 4 {
        fmt.Println("用法: calc <num1> <operator> <num2>")
        fmt.Println("示例: calc 10 + 5")
        os.Exit(1) // 参数错误，退出程序
    }

    // 解析第一个数字参数（字符串转浮点数）
    num1, err1 := strconv.ParseFloat(os.Args[1], 64)
    operator := os.Args[2] // 运算符（+、-、*、/）
    // 解析第二个数字参数
    num2, err2 := strconv.ParseFloat(os.Args[3], 64)

    // 检查数字解析是否成功
    if err1 != nil || err2 != nil {
        fmt.Println("错误: 无效的数字")
        os.Exit(1)
    }

    var result float64
    // 根据运算符执行相应计算
    switch operator {
    case "+":
        result = num1 + num2 // 加法
    case "-":
        result = num1 - num2 // 减法
    case "*":
        result = num1 * num2 // 乘法
    case "/":
        // 除法需要检查除数是否为 0
        if num2 == 0 {
            fmt.Println("错误: 除数不能为0")
            os.Exit(1)
        }
        result = num1 / num2 // 除法
    default:
        // 不支持的运算符
        fmt.Println("错误: 不支持的运算符")
        os.Exit(1)
    }

    // 输出计算结果，保留两位小数
    fmt.Printf("%.2f %s %.2f = %.2f\n", num1, operator, num2, result)
}
```

**运行示例**：
```bash
go run calc.go 10 + 5
# 输出: 10.00 + 5.00 = 15.00
```

### Demo 2: 文件操作工具

创建一个简单的文件读取工具：

```go
package main

import (
    "fmt"
    "io/ioutil"
    "os"
)

func main() {
    // 检查是否提供了文件名参数
    if len(os.Args) < 2 {
        fmt.Println("用法: cat <文件名>")
        os.Exit(1) // 参数不足，退出程序
    }

    // 获取第一个参数作为文件名
    filename := os.Args[1]
    // 读取整个文件内容（一次性读取，适合小文件）
    content, err := ioutil.ReadFile(filename)
    
    // 检查文件读取是否成功
    if err != nil {
        fmt.Printf("错误: 无法读取文件 %s: %v\n", filename, err)
        os.Exit(1) // 读取失败，退出程序
    }

    // 将字节数组转换为字符串并输出
    fmt.Println(string(content))
}
```

**运行示例**：
```bash
echo "Hello Go!" > test.txt
go run cat.go test.txt
# 输出: Hello Go!
```

### Demo 3: HTTP 服务器

创建一个简单的 HTTP 服务器：

```go
package main

import (
    "fmt"
    "net/http"
)

// handler 是 HTTP 请求处理函数
// w: 用于向客户端写入响应
// r: 包含客户端请求的信息
func handler(w http.ResponseWriter, r *http.Request) {
    // 向响应写入访问的路径信息
    fmt.Fprintf(w, "Hello, 你访问了: %s\n", r.URL.Path)
    // 向响应写入请求方法（GET、POST 等）
    fmt.Fprintf(w, "请求方法: %s\n", r.Method)
}

func main() {
    // 注册路由处理函数：当访问根路径 "/" 时，调用 handler 函数
    http.HandleFunc("/", handler)
    
    fmt.Println("服务器启动在 http://localhost:8080")
    // 启动 HTTP 服务器，监听 8080 端口
    // nil 表示使用默认的多路复用器
    if err := http.ListenAndServe(":8080", nil); err != nil {
        fmt.Printf("服务器错误: %v\n", err)
    }
}
```

**运行示例**：
```bash
go run server.go
# 在浏览器访问 http://localhost:8080
```

## 开发工具推荐

### VS Code
- 安装 Go 扩展：`Go` (by Go Team at Google)
- 自动格式化、代码补全、调试支持

### GoLand
- JetBrains 出品的专业 Go IDE
- 功能强大但需要付费

### 命令行工具

```bash
# 格式化代码
go fmt ./...

# 代码检查
go vet ./...

# 运行测试
go test ./...

# 查看文档
go doc fmt.Println
```

## 下一步

完成快速入门后，建议学习：
1. [基础语法](./02-基础语法.md) - 变量、常量、基本语法规则
2. [数据类型](./03-数据类型.md) - Go 的各种数据类型

## 常见问题

### Q: Go 程序必须放在 GOPATH 下吗？
A: Go 1.11+ 使用模块系统，不需要 GOPATH。只需在项目目录下运行 `go mod init`。

### Q: 如何设置 Go 代理（国内用户）？
A: 
```bash
go env -w GOPROXY=https://goproxy.cn,direct
```

### Q: Go 程序如何交叉编译？
A: 
```bash
# 编译 Linux 版本
GOOS=linux GOARCH=amd64 go build

# 编译 Windows 版本
GOOS=windows GOARCH=amd64 go build
```

