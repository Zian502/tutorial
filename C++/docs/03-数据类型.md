# æ•°æ®ç±»å‹

C++ æä¾›äº†ä¸°å¯Œçš„æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬åŸºæœ¬ç±»å‹å’Œå¤åˆç±»å‹ã€‚ç†è§£è¿™äº›ç±»å‹å¯¹äºç¼–å†™é«˜æ•ˆã€å®‰å…¨çš„ C++ ç¨‹åºè‡³å…³é‡è¦ã€‚

## æ•°ç»„

### ä¸€ç»´æ•°ç»„

```cpp
#include <iostream>
#include <array>  // C++11 std::array

int main() {
    // æ–¹å¼ 1ï¼šC é£æ ¼æ•°ç»„
    int arr1[5] = {1, 2, 3, 4, 5};
    int arr2[] = {1, 2, 3};  // è‡ªåŠ¨æ¨æ–­å¤§å°
    int arr3[5] = {};        // å…¨éƒ¨åˆå§‹åŒ–ä¸º 0
    
    // è®¿é—®å…ƒç´ 
    std::cout << arr1[0] << std::endl;  // 1
    arr1[0] = 10;
    
    // éå†æ•°ç»„
    for (int i = 0; i < 5; ++i) {
        std::cout << arr1[i] << " ";
    }
    std::cout << std::endl;
    
    // èŒƒå›´ for å¾ªç¯ï¼ˆC++11ï¼‰
    for (int elem : arr1) {
        std::cout << elem << " ";
    }
    std::cout << std::endl;
    
    // æ–¹å¼ 2ï¼šstd::arrayï¼ˆC++11ï¼Œæ¨èï¼‰
    std::array<int, 5> arr4 = {1, 2, 3, 4, 5};
    std::array<int, 5> arr5{};  // å…¨éƒ¨åˆå§‹åŒ–ä¸º 0
    
    // std::array çš„ä¼˜åŠ¿
    std::cout << "Size: " << arr4.size() << std::endl;  // 5
    std::cout << "Empty: " << arr4.empty() << std::endl;  // false
    std::cout << "First: " << arr4.front() << std::endl;  // 1
    std::cout << "Last: " << arr4.back() << std::endl;    // 5
    
    // ä½¿ç”¨ at() è¿›è¡Œè¾¹ç•Œæ£€æŸ¥
    try {
        std::cout << arr4.at(10) << std::endl;  // æŠ›å‡ºå¼‚å¸¸
    } catch (const std::out_of_range& e) {
        std::cout << "Out of range!" << std::endl;
    }
    
    return 0;
}
```

### å¤šç»´æ•°ç»„

```cpp
#include <iostream>

int main() {
    // äºŒç»´æ•°ç»„
    int matrix[3][4] = {
        {1, 2, 3, 4},
        {5, 6, 7, 8},
        {9, 10, 11, 12}
    };
    
    // è®¿é—®å…ƒç´ 
    std::cout << matrix[0][0] << std::endl;  // 1
    std::cout << matrix[2][3] << std::endl;   // 12
    
    // éå†äºŒç»´æ•°ç»„
    for (int i = 0; i < 3; ++i) {
        for (int j = 0; j < 4; ++j) {
            std::cout << matrix[i][j] << " ";
        }
        std::cout << std::endl;
    }
    
    // ä½¿ç”¨ std::array çš„å¤šç»´æ•°ç»„ï¼ˆC++11ï¼‰
    std::array<std::array<int, 4>, 3> matrix2 = {{
        {1, 2, 3, 4},
        {5, 6, 7, 8},
        {9, 10, 11, 12}
    }};
    
    return 0;
}
```

### æ•°ç»„ä½œä¸ºå‡½æ•°å‚æ•°

```cpp
#include <iostream>

// æ–¹å¼ 1ï¼šä¼ é€’æ•°ç»„æŒ‡é’ˆå’Œå¤§å°
void print_array1(int* arr, size_t size) {
    for (size_t i = 0; i < size; ++i) {
        std::cout << arr[i] << " ";
    }
    std::cout << std::endl;
}

// æ–¹å¼ 2ï¼šä¼ é€’æ•°ç»„å¼•ç”¨ï¼ˆéœ€è¦çŸ¥é“å¤§å°ï¼‰
void print_array2(int (&arr)[5]) {
    for (int elem : arr) {
        std::cout << elem << " ";
    }
    std::cout << std::endl;
}

// æ–¹å¼ 3ï¼šä½¿ç”¨ std::arrayï¼ˆæ¨èï¼‰
void print_array3(const std::array<int, 5>& arr) {
    for (int elem : arr) {
        std::cout << elem << " ";
    }
    std::cout << std::endl;
}

// æ–¹å¼ 4ï¼šä½¿ç”¨æ¨¡æ¿ï¼ˆå¯ä»¥æ¥å—ä»»æ„å¤§å°çš„æ•°ç»„ï¼‰
template<size_t N>
void print_array4(const int (&arr)[N]) {
    for (size_t i = 0; i < N; ++i) {
        std::cout << arr[i] << " ";
    }
    std::cout << std::endl;
}

int main() {
    int arr[5] = {1, 2, 3, 4, 5};
    print_array1(arr, 5);
    print_array2(arr);
    
    std::array<int, 5> arr2 = {1, 2, 3, 4, 5};
    print_array3(arr2);
    print_array4(arr);
    
    return 0;
}
```

### ä¸å…¶ä»–è¯­è¨€å¯¹æ¯”

| è¯­è¨€ | æ•°ç»„å£°æ˜ | åŠ¨æ€æ•°ç»„ | è¾¹ç•Œæ£€æŸ¥ |
|------|---------|---------|---------|
| **C++** | `int arr[5]` | `std::vector` | `std::array::at()` |
| **Java** | `int[] arr = new int[5]` | `ArrayList` | è‡ªåŠ¨æ£€æŸ¥ |
| **Python** | `arr = [1, 2, 3]` | `list` | è‡ªåŠ¨æ£€æŸ¥ |
| **Go** | `arr := [5]int{}` | `slice` | è‡ªåŠ¨æ£€æŸ¥ |
| **Rust** | `let arr: [i32; 5]` | `Vec` | è‡ªåŠ¨æ£€æŸ¥ |

## å­—ç¬¦ä¸²

### C é£æ ¼å­—ç¬¦ä¸²

```cpp
#include <iostream>
#include <cstring>

int main() {
    // C é£æ ¼å­—ç¬¦ä¸²ï¼ˆå­—ç¬¦æ•°ç»„ï¼‰
    char str1[] = "Hello";
    char str2[10] = "World";
    char str3[] = {'H', 'e', 'l', 'l', 'o', '\0'};
    
    // å­—ç¬¦ä¸²é•¿åº¦
    std::cout << strlen(str1) << std::endl;  // 5
    
    // å­—ç¬¦ä¸²å¤åˆ¶
    char dest[20];
    strcpy(dest, str1);
    std::cout << dest << std::endl;
    
    // å­—ç¬¦ä¸²è¿æ¥
    strcat(dest, " ");
    strcat(dest, str2);
    std::cout << dest << std::endl;
    
    // å­—ç¬¦ä¸²æ¯”è¾ƒ
    if (strcmp(str1, str2) == 0) {
        std::cout << "Equal" << std::endl;
    }
    
    return 0;
}
```

### std::stringï¼ˆæ¨èï¼‰

```cpp
#include <iostream>
#include <string>

int main() {
    // åˆ›å»ºå­—ç¬¦ä¸²
    std::string str1 = "Hello";
    std::string str2("World");
    std::string str3{'H', 'e', 'l', 'l', 'o'};  // C++11
    std::string str4(5, 'A');  // "AAAAA"
    
    // å­—ç¬¦ä¸²è¿æ¥
    std::string result = str1 + " " + str2;
    std::cout << result << std::endl;  // "Hello World"
    
    // å­—ç¬¦ä¸²é•¿åº¦
    std::cout << result.length() << std::endl;  // 11
    std::cout << result.size() << std::endl;    // 11
    
    // è®¿é—®å­—ç¬¦
    std::cout << result[0] << std::endl;        // 'H'
    std::cout << result.at(0) << std::endl;    // 'H'ï¼ˆå¸¦è¾¹ç•Œæ£€æŸ¥ï¼‰
    
    // å­å­—ç¬¦ä¸²
    std::string sub = result.substr(0, 5);  // "Hello"
    std::cout << sub << std::endl;
    
    // æŸ¥æ‰¾
    size_t pos = result.find("World");
    if (pos != std::string::npos) {
        std::cout << "Found at position: " << pos << std::endl;
    }
    
    // æ›¿æ¢
    result.replace(6, 5, "C++");
    std::cout << result << std::endl;  // "Hello C++"
    
    // æ’å…¥
    result.insert(5, " Beautiful");
    std::cout << result << std::endl;  // "Hello Beautiful C++"
    
    // åˆ é™¤
    result.erase(5, 10);
    std::cout << result << std::endl;  // "Hello C++"
    
    // æ¯”è¾ƒ
    if (str1 == str2) {
        std::cout << "Equal" << std::endl;
    }
    if (str1 < str2) {
        std::cout << "str1 < str2" << std::endl;
    }
    
    // è½¬æ¢ä¸º C é£æ ¼å­—ç¬¦ä¸²
    const char* c_str = result.c_str();
    
    return 0;
}
```

### std::string_viewï¼ˆC++17ï¼‰

```cpp
#include <iostream>
#include <string>
#include <string_view>

void print_string(std::string_view sv) {
    // string_view æ˜¯å­—ç¬¦ä¸²çš„åªè¯»è§†å›¾ï¼Œä¸æ‹¥æœ‰æ•°æ®
    std::cout << sv << std::endl;
    std::cout << "Length: " << sv.length() << std::endl;
}

int main() {
    std::string str = "Hello World";
    const char* cstr = "Hello C++";
    
    // string_view å¯ä»¥æ¥å—å¤šç§å­—ç¬¦ä¸²ç±»å‹
    print_string(str);           // std::string
    print_string(cstr);          // C é£æ ¼å­—ç¬¦ä¸²
    print_string("Hello Rust");  // å­—ç¬¦ä¸²å­—é¢é‡
    print_string(str.substr(0, 5));  // å­å­—ç¬¦ä¸²
    
    // åˆ›å»º string_view
    std::string_view sv1 = "Hello";
    std::string_view sv2(str);
    std::string_view sv3(str.data(), 5);  // å‰ 5 ä¸ªå­—ç¬¦
    
    return 0;
}
```

## ç»“æ„ä½“ï¼ˆstructï¼‰

### åŸºæœ¬ç»“æ„ä½“

```cpp
#include <iostream>
#include <string>

// å®šä¹‰ç»“æ„ä½“
struct Person {
    std::string name;
    int age;
    double height;
};

// ç»“æ„ä½“åˆå§‹åŒ–
int main() {
    // æ–¹å¼ 1ï¼šèšåˆåˆå§‹åŒ–ï¼ˆC++11ï¼‰
    Person p1 = {"Alice", 25, 165.5};
    
    // æ–¹å¼ 2ï¼šæŒ‡å®šåˆå§‹åŒ–ï¼ˆC++20ï¼‰
    Person p2 = {.name = "Bob", .age = 30, .height = 175.0};
    
    // æ–¹å¼ 3ï¼šé»˜è®¤åˆå§‹åŒ–
    Person p3{};  // æ‰€æœ‰æˆå‘˜åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼
    
    // è®¿é—®æˆå‘˜
    std::cout << p1.name << ", " << p1.age << ", " << p1.height << std::endl;
    
    // ä¿®æ”¹æˆå‘˜
    p1.age = 26;
    
    // ç»“æ„ä½“ä½œä¸ºå‡½æ•°å‚æ•°
    void print_person(const Person& p);
    print_person(p1);
    
    return 0;
}

void print_person(const Person& p) {
    std::cout << "Name: " << p.name 
              << ", Age: " << p.age 
              << ", Height: " << p.height << std::endl;
}
```

### ç»“æ„ä½“æ–¹æ³•

```cpp
#include <iostream>
#include <string>
#include <cmath>

struct Point {
    double x, y;
    
    // æ„é€ å‡½æ•°
    Point() : x(0), y(0) {}
    Point(double x, double y) : x(x), y(y) {}
    
    // æˆå‘˜å‡½æ•°
    double distance(const Point& other) const {
        double dx = x - other.x;
        double dy = y - other.y;
        return std::sqrt(dx * dx + dy * dy);
    }
    
    // è¿ç®—ç¬¦é‡è½½
    Point operator+(const Point& other) const {
        return Point(x + other.x, y + other.y);
    }
    
    bool operator==(const Point& other) const {
        return x == other.x && y == other.y;
    }
};

int main() {
    Point p1(1.0, 2.0);
    Point p2(4.0, 6.0);
    
    std::cout << "Distance: " << p1.distance(p2) << std::endl;
    
    Point p3 = p1 + p2;
    std::cout << "p3: (" << p3.x << ", " << p3.y << ")" << std::endl;
    
    return 0;
}
```

### ç»“æ„ä½“åµŒå¥—

```cpp
#include <iostream>
#include <string>

struct Address {
    std::string street;
    std::string city;
    std::string zip;
};

struct Employee {
    std::string name;
    int id;
    Address address;  // åµŒå¥—ç»“æ„ä½“
};

int main() {
    Employee emp = {
        "John Doe",
        1001,
        {"123 Main St", "New York", "10001"}
    };
    
    std::cout << "Employee: " << emp.name << std::endl;
    std::cout << "Address: " << emp.address.street 
              << ", " << emp.address.city << std::endl;
    
    return 0;
}
```

## æšä¸¾ï¼ˆenumï¼‰

### ä¼ ç»Ÿæšä¸¾

```cpp
#include <iostream>

// ä¼ ç»Ÿæšä¸¾
enum Color {
    RED,      // 0
    GREEN,    // 1
    BLUE      // 2
};

enum Status {
    PENDING,   // 0
    ACTIVE,    // 1
    INACTIVE   // 2
};

int main() {
    Color c = RED;
    
    // æšä¸¾å€¼å¯ä»¥éšå¼è½¬æ¢ä¸ºæ•´æ•°
    std::cout << static_cast<int>(c) << std::endl;  // 0
    
    // ä½†ä¸åŒæšä¸¾ç±»å‹ä¸èƒ½ç›´æ¥æ¯”è¾ƒ
    // if (c == PENDING) { }  // é”™è¯¯ï¼
    
    return 0;
}
```

### å¼ºç±»å‹æšä¸¾ï¼ˆenum classï¼ŒC++11ï¼‰

```cpp
#include <iostream>

// å¼ºç±»å‹æšä¸¾ï¼ˆæ¨èï¼‰
enum class Color {
    Red,
    Green,
    Blue
};

enum class Status {
    Pending,
    Active,
    Inactive
};

// æŒ‡å®šåº•å±‚ç±»å‹
enum class Byte : uint8_t {
    Zero = 0,
    One = 1,
    Max = 255
};

int main() {
    Color c = Color::Red;
    Status s = Status::Active;
    
    // ä¸èƒ½éšå¼è½¬æ¢ä¸ºæ•´æ•°
    // int x = c;  // é”™è¯¯ï¼
    int x = static_cast<int>(c);  // éœ€è¦æ˜¾å¼è½¬æ¢
    
    // ä¸åŒæšä¸¾ç±»å‹ä¸èƒ½æ¯”è¾ƒï¼ˆç±»å‹å®‰å…¨ï¼‰
    // if (c == s) { }  // é”™è¯¯ï¼
    
    // å¯ä»¥æ¯”è¾ƒç›¸åŒç±»å‹
    if (c == Color::Red) {
        std::cout << "Red color" << std::endl;
    }
    
    return 0;
}
```

### æšä¸¾ä¸ switch

```cpp
#include <iostream>

enum class TrafficLight {
    Red,
    Yellow,
    Green
};

void handle_light(TrafficLight light) {
    switch (light) {
        case TrafficLight::Red:
            std::cout << "Stop!" << std::endl;
            break;
        case TrafficLight::Yellow:
            std::cout << "Caution!" << std::endl;
            break;
        case TrafficLight::Green:
            std::cout << "Go!" << std::endl;
            break;
        // å¦‚æœæšä¸¾å€¼å¯èƒ½å¢åŠ ï¼Œè€ƒè™‘æ·»åŠ  default
    }
}

int main() {
    handle_light(TrafficLight::Red);
    handle_light(TrafficLight::Green);
    
    return 0;
}
```

## è”åˆï¼ˆunionï¼‰

### åŸºæœ¬è”åˆ

```cpp
#include <iostream>
#include <cstring>

// è”åˆï¼šæ‰€æœ‰æˆå‘˜å…±äº«åŒä¸€å—å†…å­˜
union Data {
    int i;
    float f;
    char str[20];
};

int main() {
    Data data;
    
    // åªèƒ½åŒæ—¶ä½¿ç”¨ä¸€ä¸ªæˆå‘˜
    data.i = 42;
    std::cout << "Integer: " << data.i << std::endl;
    
    data.f = 3.14f;
    std::cout << "Float: " << data.f << std::endl;
    // æ³¨æ„ï¼šæ­¤æ—¶ data.i çš„å€¼å·²ç»è¢«è¦†ç›–
    
    std::strcpy(data.str, "Hello");
    std::cout << "String: " << data.str << std::endl;
    
    return 0;
}
```

### æ ‡è®°è”åˆï¼ˆTagged Unionï¼ŒC++17 std::variantï¼‰

```cpp
#include <iostream>
#include <variant>
#include <string>

// std::variant æ˜¯ç±»å‹å®‰å…¨çš„è”åˆï¼ˆC++17ï¼‰
using Data = std::variant<int, float, std::string>;

void print_data(const Data& data) {
    // ä½¿ç”¨ std::visit è®¿é—®
    std::visit([](auto&& arg) {
        std::cout << arg << std::endl;
    }, data);
    
    // æ£€æŸ¥ç±»å‹
    if (std::holds_alternative<int>(data)) {
        std::cout << "Integer: " << std::get<int>(data) << std::endl;
    } else if (std::holds_alternative<float>(data)) {
        std::cout << "Float: " << std::get<float>(data) << std::endl;
    } else if (std::holds_alternative<std::string>(data)) {
        std::cout << "String: " << std::get<std::string>(data) << std::endl;
    }
}

int main() {
    Data d1 = 42;
    Data d2 = 3.14f;
    Data d3 = std::string("Hello");
    
    print_data(d1);
    print_data(d2);
    print_data(d3);
    
    return 0;
}
```

## ç±»å‹åˆ«å

### typedef å’Œ using

```cpp
#include <iostream>
#include <vector>
#include <string>

// æ–¹å¼ 1ï¼štypedefï¼ˆC é£æ ¼ï¼‰
typedef int Age;
typedef std::vector<int> IntVector;
typedef void (*FuncPtr)(int);

// æ–¹å¼ 2ï¼šusingï¼ˆC++11ï¼Œæ¨èï¼‰
using Age = int;
using IntVector = std::vector<int>;
using FuncPtr = void (*)(int);

// æ¨¡æ¿åˆ«åï¼ˆåªèƒ½ä½¿ç”¨ usingï¼‰
template<typename T>
using Vector = std::vector<T>;

template<typename Key, typename Value>
using Map = std::map<Key, Value>;

int main() {
    Age age = 25;
    IntVector numbers = {1, 2, 3, 4, 5};
    Vector<std::string> strings = {"hello", "world"};
    
    return 0;
}
```

## ç±»å‹æ¨æ–­

### auto å…³é”®å­—ï¼ˆC++11ï¼‰

```cpp
#include <iostream>
#include <vector>
#include <string>

int main() {
    // åŸºæœ¬ç±»å‹æ¨æ–­
    auto x = 42;           // int
    auto y = 3.14;         // double
    auto z = "Hello";      // const char*
    auto name = std::string("World");  // std::string
    
    // å®¹å™¨ç±»å‹æ¨æ–­
    std::vector<int> vec = {1, 2, 3, 4, 5};
    auto it = vec.begin();  // std::vector<int>::iterator
    
    // èŒƒå›´ for å¾ªç¯
    for (auto elem : vec) {
        std::cout << elem << " ";
    }
    std::cout << std::endl;
    
    // å‡½æ•°è¿”å›ç±»å‹æ¨æ–­ï¼ˆC++14ï¼‰
    auto add = [](auto a, auto b) { return a + b; };
    std::cout << add(3, 4) << std::endl;      // 7
    std::cout << add(3.5, 4.2) << std::endl; // 7.7
    
    return 0;
}
```

### decltypeï¼ˆC++11ï¼‰

```cpp
#include <iostream>
#include <type_traits>

int main() {
    int x = 42;
    double y = 3.14;
    
    // decltype è·å–è¡¨è¾¾å¼çš„ç±»å‹
    decltype(x) z = 10;  // z çš„ç±»å‹æ˜¯ int
    decltype(x + y) result = x + y;  // result çš„ç±»å‹æ˜¯ double
    
    // ç”¨äºå‡½æ•°è¿”å›ç±»å‹
    auto add(int a, int b) -> decltype(a + b) {
        return a + b;
    }
    
    // æ£€æŸ¥ç±»å‹
    static_assert(std::is_same_v<decltype(x), int>);
    static_assert(std::is_same_v<decltype(result), double>);
    
    return 0;
}
```

## å®è·µç»ƒä¹ 

### ç»ƒä¹  1ï¼šå­¦ç”Ÿä¿¡æ¯ç®¡ç†

```cpp
#include <iostream>
#include <string>
#include <array>

struct Student {
    std::string name;
    int age;
    std::array<double, 3> scores;  // ä¸‰é—¨è¯¾ç¨‹æˆç»©
    
    double average() const {
        double sum = 0;
        for (double score : scores) {
            sum += score;
        }
        return sum / scores.size();
    }
};

int main() {
    Student s = {"Alice", 20, {85.5, 90.0, 88.5}};
    
    std::cout << "Name: " << s.name << std::endl;
    std::cout << "Age: " << s.age << std::endl;
    std::cout << "Average: " << s.average() << std::endl;
    
    return 0;
}
```

### ç»ƒä¹  2ï¼šé¢œè‰²æšä¸¾

```cpp
#include <iostream>
#include <string>

enum class Color {
    Red,
    Green,
    Blue,
    Yellow,
    Cyan,
    Magenta
};

std::string color_to_string(Color c) {
    switch (c) {
        case Color::Red: return "Red";
        case Color::Green: return "Green";
        case Color::Blue: return "Blue";
        case Color::Yellow: return "Yellow";
        case Color::Cyan: return "Cyan";
        case Color::Magenta: return "Magenta";
        default: return "Unknown";
    }
}

int main() {
    Color c = Color::Blue;
    std::cout << color_to_string(c) << std::endl;
    
    return 0;
}
```

## ä¸å…¶ä»–è¯­è¨€å¯¹æ¯”æ€»ç»“

| ç‰¹æ€§ | C++ | Java | Python | Go | Rust |
|------|-----|------|--------|-----|------|
| **æ•°ç»„** | `int arr[5]` / `std::array` | `int[] arr` | `list` | `[5]int` | `[i32; 5]` |
| **å­—ç¬¦ä¸²** | `std::string` | `String` | `str` | `string` | `String` / `&str` |
| **ç»“æ„ä½“** | `struct` | `class` | `class` / `dataclass` | `struct` | `struct` |
| **æšä¸¾** | `enum class` | `enum` | `Enum` | æ— åŸç”Ÿæ”¯æŒ | `enum` |
| **è”åˆ** | `union` / `std::variant` | æ—  | `Union` | æ—  | `enum` |

## ä¸‹ä¸€æ­¥

ç°åœ¨ä½ å·²ç»æŒæ¡äº† C++ çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç»§ç»­å­¦ä¹ ï¼š

1. **[æ§åˆ¶ç»“æ„](./04-æ§åˆ¶ç»“æ„.md)** - å­¦ä¹ æ¡ä»¶è¯­å¥å’Œå¾ªç¯
2. **[å‡½æ•°](./05-å‡½æ•°.md)** - æŒæ¡å‡½æ•°å®šä¹‰å’Œä½¿ç”¨
3. **[é¢å‘å¯¹è±¡ç¼–ç¨‹](./06-é¢å‘å¯¹è±¡ç¼–ç¨‹.md)** - æ·±å…¥å­¦ä¹ ç±»å’Œå¯¹è±¡

ç¥ä½ å­¦ä¹ æ„‰å¿«ï¼ğŸ‰

